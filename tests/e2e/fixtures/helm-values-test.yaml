# Namespace will be set dynamically by test code
# namespace: <set-by-test>

config:
  logLevel: debug

  watcher:
    resources:
      - group: ""
        version: "v1"
        kind: "Pod"
      - group: "apps"
        version: "v1"
        kind: "ReplicaSet"
      - group: "apps"
        version: "v1"
        kind: "Deployment"
      - group: ""
        version: "v1"
        kind: "Service"
      - group: ""
        version: "v1"
        kind: "Node"
      - group: "apps"
        version: "v1"
        kind: "DaemonSet"
      - group: "apps"
        version: "v1"
        kind: "StatefulSet"
      - group: ""
        version: "v1"
        kind: "ConfigMap"
      - group: ""
        version: "v1"
        kind: "PersistentVolume"
      - group: ""
        version: "v1"
        kind: "PersistentVolumeClaim"
      - group: "batch"
        version: "v1"
        kind: "Job"
      - group: "batch"
        version: "v1"
        kind: "CronJob"
      - group: ""
        version: "v1"
        kind: "Event"
      - group: ""
        version: "v1"
        kind: "ServiceAccount"
      - group: "networking.k8s.io"
        version: "v1"
        kind: "NetworkPolicy"
      - group: "networking.k8s.io"
        version: "v1"
        kind: "Ingress"
      # RBAC Resources
      - group: "rbac.authorization.k8s.io"
        version: "v1"
        kind: "Role"
      - group: "rbac.authorization.k8s.io"
        version: "v1"
        kind: "ClusterRole"
      - group: "rbac.authorization.k8s.io"
        version: "v1"
        kind: "RoleBinding"
      - group: "rbac.authorization.k8s.io"
        version: "v1"
        kind: "ClusterRoleBinding"
      # API Extensions
      - group: "apiextensions.k8s.io"
        version: "v1"
        kind: "CustomResourceDefinition"
      # Custom Resources - Flux CD
      # Source Controller
      - group: "source.toolkit.fluxcd.io"
        version: "v1"
        kind: "GitRepository"
        resource: "gitrepositories"
      - group: "source.toolkit.fluxcd.io"
        version: "v1"
        kind: "OCIRepository"
        resource: "ocirepositories"
      - group: "source.toolkit.fluxcd.io"
        version: "v1"
        kind: "HelmRepository"
        resource: "helmrepositories"
      - group: "source.toolkit.fluxcd.io"
        version: "v1"
        kind: "HelmChart"
      - group: "source.toolkit.fluxcd.io"
        version: "v1"
        kind: "Bucket"
      - group: "source.toolkit.fluxcd.io"
        version: "v1"
        kind: "ExternalArtifact"
      - group: "source.toolkit.fluxcd.io"
        version: "v1"
        kind: "ArtifactGenerator"
      # Kustomize Controller
      - group: "kustomize.toolkit.fluxcd.io"
        version: "v1"
        kind: "Kustomization"
      # Helm Controller
      - group: "helm.toolkit.fluxcd.io"
        version: "v2"
        kind: "HelmRelease"
      # Notification Controller
      - group: "notification.toolkit.fluxcd.io"
        version: "v1beta3"
        kind: "Alert"
      - group: "notification.toolkit.fluxcd.io"
        version: "v1beta3"
        kind: "Provider"
      - group: "notification.toolkit.fluxcd.io"
        version: "v1"
        kind: "Receiver"
      # Image Automation Controllers
      - group: "image.toolkit.fluxcd.io"
        version: "v1"
        kind: "ImageRepository"
        resource: "imagerepositories"
      - group: "image.toolkit.fluxcd.io"
        version: "v1"
        kind: "ImagePolicy"
        resource: "imagepolicies"
      - group: "image.toolkit.fluxcd.io"
        version: "v1"
        kind: "ImageUpdateAutomation"


image:
  repository: spectre
  tag: test-build
  pullPolicy: IfNotPresent

replicaCount: 1

resources:
  requests:
    memory: "256Mi"
    cpu: "500m"

service:
  type: ClusterIP
  port: 8080
  targetPort: 8080

storage:
  type: memory
  retention:
    maxAge: 1h
    maxSize: 100Mi

persistence:
  enabled: false
  storageClassName: standard

podAnnotations:
  test: "true"

env:
  - name: LOG_LEVEL
    value: "debug"

# Enable graph for root cause analysis tests
graph:
  enabled: true
  falkordb:
    sidecar: true
    persistence:
      # Use empty storageClassName for immediate binding in test environments
      storageClassName: ""

