# Production environment configuration
# Use: helm install spectre ./chart -f chart/examples/prod-values.yaml

replicaCount: 2

image:
  tag: "1.0.0"  # Use stable version in prod
  pullPolicy: IfNotPresent

resources:
  requests:
    memory: "512Mi"
    cpu: "500m"
  limits:
    memory: "2Gi"
    cpu: "1000m"

persistence:
  enabled: true
  size: 50Gi  # Large size for production
  storageClassName: "fast-ssd"  # Use fast storage

config:
  logLevel: "info"

livenessProbe:
  initialDelaySeconds: 30
  periodSeconds: 30
  failureThreshold: 5

readinessProbe:
  initialDelaySeconds: 15
  periodSeconds: 10
  failureThreshold: 3

# Pod anti-affinity for high availability
affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - spectre
          topologyKey: kubernetes.io/hostname

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000
  readOnlyRootFilesystem: true

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8080"

namespace: monitoring
