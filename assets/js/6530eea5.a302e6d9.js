"use strict";(globalThis.webpackChunkspectre_docs=globalThis.webpackChunkspectre_docs||[]).push([[7181],{7954:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"mcp-integration/tools-reference/investigate","title":"investigate Tool","description":"Deep resource investigation with timeline reconstruction and RCA prompts","source":"@site/docs/mcp-integration/tools-reference/investigate.md","sourceDirName":"mcp-integration/tools-reference","slug":"/mcp-integration/tools-reference/investigate","permalink":"/spectre/docs/mcp-integration/tools-reference/investigate","draft":false,"unlisted":false,"editUrl":"https://github.com/moolen/spectre/tree/master/docs/docs/mcp-integration/tools-reference/investigate.md","tags":[],"version":"current","lastUpdatedBy":"Moritz Johner","lastUpdatedAt":1765616329000,"frontMatter":{"title":"investigate Tool","description":"Deep resource investigation with timeline reconstruction and RCA prompts","keywords":["mcp","tools","investigate","timeline","rca","incident","analysis"]},"sidebar":"docsSidebar","previous":{"title":"resource_changes Tool","permalink":"/spectre/docs/mcp-integration/tools-reference/resource-changes"},"next":{"title":"resource_explorer Tool","permalink":"/spectre/docs/mcp-integration/tools-reference/resource-explorer"}}');var t=s(4848),r=s(8453);const d={title:"investigate Tool",description:"Deep resource investigation with timeline reconstruction and RCA prompts",keywords:["mcp","tools","investigate","timeline","rca","incident","analysis"]},c="investigate Tool",o={},l=[{value:"Overview",id:"overview",level:2},{value:"Quick Example",id:"quick-example",level:2},{value:"Single Resource Investigation",id:"single-resource-investigation",level:3},{value:"Multi-Resource Investigation (Wildcard)",id:"multi-resource-investigation-wildcard",level:3},{value:"Post-Mortem Investigation",id:"post-mortem-investigation",level:3},{value:"Input Parameters",id:"input-parameters",level:2},{value:"Resource Name Wildcards",id:"resource-name-wildcards",level:3},{value:"Investigation Types",id:"investigation-types",level:3},{value:"Timestamp Format",id:"timestamp-format",level:3},{value:"Output Structure",id:"output-structure",level:2},{value:"Top-Level Fields",id:"top-level-fields",level:3},{value:"InvestigationEvidence Fields",id:"investigationevidence-fields",level:3},{value:"SegmentSummary Fields",id:"segmentsummary-fields",level:3},{value:"EventSummary Fields",id:"eventsummary-fields",level:3},{value:"ResourceSnapshot Fields",id:"resourcesnapshot-fields",level:3},{value:"Investigation Prompts",id:"investigation-prompts",level:2},{value:"Common Prompts (All Types)",id:"common-prompts-all-types",level:3},{value:"Incident-Specific Prompts",id:"incident-specific-prompts",level:3},{value:"Post-Mortem-Specific Prompts",id:"post-mortem-specific-prompts",level:3},{value:"Contextual Prompts",id:"contextual-prompts",level:3},{value:"Example Prompt Set",id:"example-prompt-set",level:3},{value:"Usage Patterns",id:"usage-patterns",level:2},{value:"Pattern 1: Single Resource Deep Dive",id:"pattern-1-single-resource-deep-dive",level:3},{value:"Pattern 2: Multi-Resource Investigation",id:"pattern-2-multi-resource-investigation",level:3},{value:"Pattern 3: Post-Mortem Documentation",id:"pattern-3-post-mortem-documentation",level:3},{value:"Pattern 4: Live Incident Investigation",id:"pattern-4-live-incident-investigation",level:3},{value:"Pattern 5: Deployment Investigation",id:"pattern-5-deployment-investigation",level:3},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Example 1: Pod CrashLoopBackOff Investigation",id:"example-1-pod-crashloopbackoff-investigation",level:3},{value:"Example 2: Deployment Post-Mortem",id:"example-2-deployment-post-mortem",level:3},{value:"Example 3: Multi-Pod Wildcard Investigation",id:"example-3-multi-pod-wildcard-investigation",level:3},{value:"Performance Characteristics",id:"performance-characteristics",level:2},{value:"Execution Time",id:"execution-time",level:3},{value:"Optimization Tips",id:"optimization-tips",level:3},{value:"Memory Usage",id:"memory-usage",level:3},{value:"Integration Patterns",id:"integration-patterns",level:2},{value:"Pattern 1: Three-Step RCA Workflow",id:"pattern-1-three-step-rca-workflow",level:3},{value:"Pattern 2: Post-Mortem Prompt Integration",id:"pattern-2-post-mortem-prompt-integration",level:3},{value:"Pattern 3: Live Incident Prompt Integration",id:"pattern-3-live-incident-prompt-integration",level:3},{value:"Pattern 4: Timeline Export for Documentation",id:"pattern-4-timeline-export-for-documentation",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Empty Investigations Array",id:"empty-investigations-array",level:3},{value:"Missing Status Segments",id:"missing-status-segments",level:3},{value:"Investigation Prompts Not Helpful",id:"investigation-prompts-not-helpful",level:3},{value:"High Investigation Time",id:"high-investigation-time",level:3},{value:"MCP Connection Errors",id:"mcp-connection-errors",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"MCP Protocol Request",id:"mcp-protocol-request",level:3},{value:"MCP Protocol Response",id:"mcp-protocol-response",level:3},{value:"cURL Example",id:"curl-example",level:3},{value:"Claude Desktop Usage",id:"claude-desktop-usage",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"\u2705 Do",id:"-do",level:3},{value:"\u274c Don&#39;t",id:"-dont",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"investigate-tool",children:"investigate Tool"})}),"\n",(0,t.jsx)(n.p,{children:"Deep investigation of specific Kubernetes resources with timeline reconstruction, status transitions, and AI-generated root cause analysis prompts."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"investigate"})," tool provides detailed forensic analysis of individual resources or resource groups, reconstructing what happened over time and generating investigation prompts to guide root cause analysis."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key Capabilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Timeline Reconstruction"}),": Chronological view of status changes and events"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Status Segment Analysis"}),": Understand how long resources stayed in each state"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AI-Generated RCA Prompts"}),": Contextual investigation questions for LLMs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Investigation Types"}),": Incident (live), post-mortem (historical), or auto-detection"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multi-Resource Support"}),": Investigate multiple resources with wildcard (",(0,t.jsx)(n.code,{children:"*"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Event Correlation"}),": Link Kubernetes events to status transitions"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"When to Use:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Deep investigation of a specific resource after identifying it with ",(0,t.jsx)(n.code,{children:"cluster_health"})," or ",(0,t.jsx)(n.code,{children:"resource_changes"})]}),"\n",(0,t.jsx)(n.li,{children:"Building a detailed timeline for post-mortem documentation"}),"\n",(0,t.jsx)(n.li,{children:"Live incident analysis with RCA prompts"}),"\n",(0,t.jsx)(n.li,{children:"Understanding why a resource transitioned through states"}),"\n",(0,t.jsx)(n.li,{children:"Correlating events with status changes"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"When NOT to Use:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Finding which resources changed (use ",(0,t.jsx)(n.code,{children:"resource_changes"})," instead)"]}),"\n",(0,t.jsxs)(n.li,{children:["Cluster-wide health overview (use ",(0,t.jsx)(n.code,{children:"cluster_health"})," instead)"]}),"\n",(0,t.jsxs)(n.li,{children:["Browsing all resources (use ",(0,t.jsx)(n.code,{children:"resource_explorer"})," instead)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"quick-example",children:"Quick Example"}),"\n",(0,t.jsx)(n.h3,{id:"single-resource-investigation",children:"Single Resource Investigation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Pod",\n  "resource_name": "nginx-7d8b5f9c6b-x7k2p",\n  "namespace": "default",\n  "start_time": 1702382400,\n  "end_time": 1702386000\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Returns detailed timeline, events, and investigation prompts for the specific Pod."}),"\n",(0,t.jsx)(n.h3,{id:"multi-resource-investigation-wildcard",children:"Multi-Resource Investigation (Wildcard)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Pod",\n  "resource_name": "*",\n  "namespace": "production",\n  "start_time": 1702382400,\n  "end_time": 1702386000,\n  "investigation_type": "incident",\n  "max_investigations": 10\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Returns top 10 Pods in ",(0,t.jsx)(n.code,{children:"production"})," namespace with incident-focused prompts."]}),"\n",(0,t.jsx)(n.h3,{id:"post-mortem-investigation",children:"Post-Mortem Investigation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Deployment",\n  "resource_name": "api-server",\n  "namespace": "production",\n  "start_time": 1702378800,\n  "end_time": 1702386000,\n  "investigation_type": "post-mortem"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Returns historical analysis with post-mortem-focused RCA prompts."}),"\n",(0,t.jsx)(n.h2,{id:"input-parameters",children:"Input Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"resource_kind"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Yes"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsxs)(n.td,{children:["Resource kind (e.g., ",(0,t.jsx)(n.code,{children:"Pod"}),", ",(0,t.jsx)(n.code,{children:"Deployment"}),", ",(0,t.jsx)(n.code,{children:"Service"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"resource_name"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"*"'})}),(0,t.jsxs)(n.td,{children:["Resource name or ",(0,t.jsx)(n.code,{children:'"*"'})," for all resources of this kind"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"namespace"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:'""'})," (all)"]}),(0,t.jsx)(n.td,{children:"Kubernetes namespace to filter by"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"start_time"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Yes"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Start of investigation window (Unix timestamp in seconds or milliseconds)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"end_time"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Yes"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"End of investigation window (Unix timestamp in seconds or milliseconds)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"investigation_type"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'"auto"'})}),(0,t.jsxs)(n.td,{children:["Investigation type: ",(0,t.jsx)(n.code,{children:'"incident"'}),", ",(0,t.jsx)(n.code,{children:'"post-mortem"'}),", or ",(0,t.jsx)(n.code,{children:'"auto"'})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"max_investigations"})}),(0,t.jsx)(n.td,{children:"int"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"20"})}),(0,t.jsx)(n.td,{children:"Maximum resources to investigate when using wildcard (max: 100)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"resource-name-wildcards",children:"Resource Name Wildcards"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Specific Resource"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{"resource_name": "nginx-7d8b5f9c6b-x7k2p"}  // Single resource\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"All Resources of Kind"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{"resource_name": "*"}  // All Pods, Deployments, etc.\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Empty (treated as wildcard)"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{"resource_name": ""}  // Equivalent to "*"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"investigation-types",children:"Investigation Types"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Use Case"}),(0,t.jsx)(n.th,{children:"Prompt Focus"}),(0,t.jsx)(n.th,{children:"Auto-Detection"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"incident"})}),(0,t.jsx)(n.td,{children:"Live incident troubleshooting"}),(0,t.jsx)(n.td,{children:"Immediate mitigation, error root cause"}),(0,t.jsx)(n.td,{children:"Current status = Error"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"post-mortem"})}),(0,t.jsx)(n.td,{children:"Historical incident analysis"}),(0,t.jsx)(n.td,{children:"Timeline, patterns, prevention"}),(0,t.jsx)(n.td,{children:"Current status \u2260 Error"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"auto"})}),(0,t.jsx)(n.td,{children:"Automatic type selection"}),(0,t.jsx)(n.td,{children:"Contextual based on status"}),(0,t.jsx)(n.td,{children:"Default behavior"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Auto-Detection Logic"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'if current_status == "Error":\n    investigation_type = "incident"\nelse:\n    investigation_type = "post-mortem"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"timestamp-format",children:"Timestamp Format"}),"\n",(0,t.jsxs)(n.p,{children:["Both ",(0,t.jsx)(n.strong,{children:"Unix seconds"})," and ",(0,t.jsx)(n.strong,{children:"Unix milliseconds"})," are supported:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Unix seconds (recommended)\n{"start_time": 1702382400, "end_time": 1702386000}\n\n// Unix milliseconds\n{"start_time": 1702382400000, "end_time": 1702386000000}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tip"}),": Use ",(0,t.jsx)(n.code,{children:"date +%s"})," for Unix seconds or ",(0,t.jsx)(n.code,{children:"date +%s%3N"})," for milliseconds."]}),"\n",(0,t.jsx)(n.h2,{id:"output-structure",children:"Output Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "investigations": [\n    {\n      "resource_id": "Pod/default/nginx-7d8b5f9c6b-x7k2p",\n      "kind": "Pod",\n      "namespace": "default",\n      "name": "nginx-7d8b5f9c6b-x7k2p",\n      "current_status": "Error",\n      "current_message": "Back-off restarting failed container",\n      "timeline_start": 1702382400,\n      "timeline_end": 1702385800,\n      "timeline_start_text": "2024-12-12 10:00:00 UTC",\n      "timeline_end_text": "2024-12-12 10:56:40 UTC",\n      "status_segments": [\n        {\n          "start_time": 1702382400,\n          "end_time": 1702383200,\n          "duration_seconds": 800,\n          "status": "Running",\n          "message": "All containers running",\n          "start_time_text": "2024-12-12 10:00:00 UTC",\n          "end_time_text": "2024-12-12 10:13:20 UTC"\n        },\n        {\n          "start_time": 1702383200,\n          "end_time": 1702385800,\n          "duration_seconds": 2600,\n          "status": "Error",\n          "message": "CrashLoopBackOff",\n          "start_time_text": "2024-12-12 10:13:20 UTC",\n          "end_time_text": "2024-12-12 10:56:40 UTC"\n        }\n      ],\n      "events": [\n        {\n          "timestamp": 1702383200,\n          "reason": "BackOff",\n          "message": "Back-off restarting failed container nginx in pod nginx-7d8b5f9c6b-x7k2p",\n          "type": "Warning",\n          "count": 15,\n          "source": "kubelet",\n          "first_timestamp": 1702383200,\n          "last_timestamp": 1702385800,\n          "timestamp_text": "2024-12-12 10:13:20 UTC",\n          "first_timestamp_text": "2024-12-12 10:13:20 UTC",\n          "last_timestamp_text": "2024-12-12 10:56:40 UTC"\n        }\n      ],\n      "investigation_prompts": [\n        "Analyze the status transitions for Pod/nginx-7d8b5f9c6b-x7k2p. What caused the transition from Running to Error?",\n        "The Pod nginx-7d8b5f9c6b-x7k2p is currently in Error state since 2600 seconds. What are the immediate mitigation steps?",\n        "Based on the events, what is the root cause of the current error in nginx-7d8b5f9c6b-x7k2p?",\n        "There are 1 error events. Summarize the error pattern and suggest preventive measures.",\n        "Interpret the current message: \'CrashLoopBackOff\'. What does it mean?"\n      ],\n      "raw_resource_snapshots": [\n        {\n          "timestamp": 1702383200,\n          "status": "Error",\n          "message": "CrashLoopBackOff",\n          "key_changes": [],\n          "timestamp_text": "2024-12-12 10:13:20 UTC"\n        }\n      ]\n    }\n  ],\n  "investigation_time_ms": 387\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"top-level-fields",children:"Top-Level Fields"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"investigations"})}),(0,t.jsx)(n.td,{children:"array"}),(0,t.jsx)(n.td,{children:"List of investigation evidence objects (one per resource)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"investigation_time_ms"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"Processing time in milliseconds"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"investigationevidence-fields",children:"InvestigationEvidence Fields"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"resource_id"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Unique resource identifier (format: ",(0,t.jsx)(n.code,{children:"Kind/Namespace/Name"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"kind"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Resource kind (e.g., ",(0,t.jsx)(n.code,{children:"Pod"}),", ",(0,t.jsx)(n.code,{children:"Deployment"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"namespace"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Kubernetes namespace"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Resource name"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"current_status"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Last known status (",(0,t.jsx)(n.code,{children:"Ready"}),", ",(0,t.jsx)(n.code,{children:"Running"}),", ",(0,t.jsx)(n.code,{children:"Error"}),", ",(0,t.jsx)(n.code,{children:"Warning"}),", etc.)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"current_message"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Last known status message"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timeline_start"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"First event/status timestamp in investigation window"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timeline_end"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"Last event/status timestamp in investigation window"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timeline_start_text"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:'Human-readable timeline start (e.g., "2024-12-12 10:00:00 UTC")'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timeline_end_text"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Human-readable timeline end"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"status_segments"})}),(0,t.jsx)(n.td,{children:"array"}),(0,t.jsxs)(n.td,{children:["Chronological status periods (see ",(0,t.jsx)(n.a,{href:"#segmentsummary-fields",children:"SegmentSummary"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"events"})}),(0,t.jsx)(n.td,{children:"array"}),(0,t.jsxs)(n.td,{children:["Kubernetes events for this resource (see ",(0,t.jsx)(n.a,{href:"#eventsummary-fields",children:"EventSummary"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"investigation_prompts"})}),(0,t.jsx)(n.td,{children:"array"}),(0,t.jsx)(n.td,{children:"AI-generated RCA prompts for LLMs"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"raw_resource_snapshots"})}),(0,t.jsx)(n.td,{children:"array"}),(0,t.jsx)(n.td,{children:"Resource snapshots at Error/Warning transitions (optional)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"segmentsummary-fields",children:"SegmentSummary Fields"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"start_time"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"Unix timestamp when segment started"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"end_time"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"Unix timestamp when segment ended"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"duration_seconds"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"How long resource stayed in this status (seconds)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"status"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Status value (",(0,t.jsx)(n.code,{children:"Ready"}),", ",(0,t.jsx)(n.code,{children:"Running"}),", ",(0,t.jsx)(n.code,{children:"Error"}),", ",(0,t.jsx)(n.code,{children:"Warning"}),", etc.)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"message"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Status message/reason"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"start_time_text"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Human-readable start time"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"end_time_text"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Human-readable end time"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"eventsummary-fields",children:"EventSummary Fields"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timestamp"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"Unix timestamp of event"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"reason"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Event reason (e.g., ",(0,t.jsx)(n.code,{children:"BackOff"}),", ",(0,t.jsx)(n.code,{children:"Pulled"}),", ",(0,t.jsx)(n.code,{children:"Failed"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"message"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Event message describing what happened"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"type"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Event type: ",(0,t.jsx)(n.code,{children:"Normal"})," or ",(0,t.jsx)(n.code,{children:"Warning"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"count"})}),(0,t.jsx)(n.td,{children:"int32"}),(0,t.jsx)(n.td,{children:"Number of times this event occurred"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"source"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Event source component (e.g., ",(0,t.jsx)(n.code,{children:"kubelet"}),", ",(0,t.jsx)(n.code,{children:"scheduler"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"first_timestamp"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"First occurrence of this event"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"last_timestamp"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"Most recent occurrence of this event"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timestamp_text"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Human-readable timestamp"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"first_timestamp_text"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Human-readable first timestamp"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"last_timestamp_text"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Human-readable last timestamp"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"resourcesnapshot-fields",children:"ResourceSnapshot Fields"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timestamp"})}),(0,t.jsx)(n.td,{children:"int64"}),(0,t.jsx)(n.td,{children:"Unix timestamp of snapshot"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"status"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsxs)(n.td,{children:["Status at this point (",(0,t.jsx)(n.code,{children:"Error"}),", ",(0,t.jsx)(n.code,{children:"Warning"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"message"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Status message"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"key_changes"})}),(0,t.jsx)(n.td,{children:"array"}),(0,t.jsx)(n.td,{children:"Important changes at this transition (future enhancement)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timestamp_text"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Human-readable timestamp"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Snapshots are only included for Error and Warning transitions to reduce token usage."]}),"\n",(0,t.jsx)(n.h2,{id:"investigation-prompts",children:"Investigation Prompts"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"investigation_prompts"})," field contains AI-generated questions designed to guide LLM-based root cause analysis."]}),"\n",(0,t.jsx)(n.h3,{id:"common-prompts-all-types",children:"Common Prompts (All Types)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"Analyze the status transitions for {Kind}/{Name}. What caused the transition from {PreviousStatus} to {CurrentStatus}?"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"incident-specific-prompts",children:"Incident-Specific Prompts"}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:'investigation_type = "incident"'})," or auto-detected for resources in Error state:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"The {Kind} {Name} is currently in Error state since {Duration} seconds. What are the immediate mitigation steps?"\n\n"Based on the events, what is the root cause of the current error in {Name}?"\n\n"There are {Count} error events. Summarize the error pattern and suggest preventive measures."\n\n"The {Kind} {Name} is in Warning state. What should we monitor to prevent escalation to Error?"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"post-mortem-specific-prompts",children:"Post-Mortem-Specific Prompts"}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:'investigation_type = "post-mortem"'})," or auto-detected for non-Error resources:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"Create a timeline of what happened to {Kind}/{Name} during this period."\n\n"What were the contributing factors that led to the status changes in {Name}?"\n\n"How long did {Name} remain in each problematic state? Suggest improvements."\n\n"Document the {Count} error events and identify any patterns that could be prevented."\n'})}),"\n",(0,t.jsx)(n.h3,{id:"contextual-prompts",children:"Contextual Prompts"}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"current_message"})," is present:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\"Interpret the current message: '{Message}'. What does it mean?\"\n"})}),"\n",(0,t.jsx)(n.h3,{id:"example-prompt-set",children:"Example Prompt Set"}),"\n",(0,t.jsx)(n.p,{children:"For a Pod in CrashLoopBackOff with incident type:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "investigation_prompts": [\n    "Analyze the status transitions for Pod/nginx-7d8b5f9c6b-x7k2p. What caused the transition from Running to Error?",\n    "The Pod nginx-7d8b5f9c6b-x7k2p is currently in Error state since 2600 seconds. What are the immediate mitigation steps?",\n    "Based on the events, what is the root cause of the current error in nginx-7d8b5f9c6b-x7k2p?",\n    "There are 3 error events. Summarize the error pattern and suggest preventive measures.",\n    "Interpret the current message: \'CrashLoopBackOff\'. What does it mean?"\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"usage-patterns",children:"Usage Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"pattern-1-single-resource-deep-dive",children:"Pattern 1: Single Resource Deep Dive"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal"}),": Investigate a specific resource identified from ",(0,t.jsx)(n.code,{children:"resource_changes"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Pod",\n  "resource_name": "api-server-85f6c9b8-k4x2p",\n  "namespace": "production",\n  "start_time": 1702382400,\n  "end_time": 1702386000,\n  "investigation_type": "incident"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),': "Show me exactly what happened to this failing Pod"']}),"\n",(0,t.jsx)(n.h3,{id:"pattern-2-multi-resource-investigation",children:"Pattern 2: Multi-Resource Investigation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal"}),": Investigate all resources of a kind in a namespace"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Pod",\n  "resource_name": "*",\n  "namespace": "default",\n  "start_time": 1702382400,\n  "end_time": 1702386000,\n  "max_investigations": 20\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),': "Investigate all Pods that had issues in the last hour"']}),"\n",(0,t.jsx)(n.h3,{id:"pattern-3-post-mortem-documentation",children:"Pattern 3: Post-Mortem Documentation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal"}),": Build comprehensive timeline for incident report"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Deployment",\n  "resource_name": "frontend",\n  "namespace": "production",\n  "start_time": 1702378800,\n  "end_time": 1702386000,\n  "investigation_type": "post-mortem"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),': "Document what happened during yesterday\'s outage"']}),"\n",(0,t.jsx)(n.h3,{id:"pattern-4-live-incident-investigation",children:"Pattern 4: Live Incident Investigation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal"}),": Real-time troubleshooting with immediate guidance"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "StatefulSet",\n  "resource_name": "database",\n  "namespace": "production",\n  "start_time": 1702385000,\n  "end_time": 1702386000,\n  "investigation_type": "incident"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),': "Help me fix this database StatefulSet that just started failing"']}),"\n",(0,t.jsx)(n.h3,{id:"pattern-5-deployment-investigation",children:"Pattern 5: Deployment Investigation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal"}),": Understand Deployment behavior over time"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Deployment",\n  "resource_name": "api-server",\n  "namespace": "production",\n  "start_time": 1702382400,\n  "end_time": 1702386000\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),': "Why did this deployment update cause issues?"']}),"\n",(0,t.jsx)(n.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,t.jsx)(n.h3,{id:"example-1-pod-crashloopbackoff-investigation",children:"Example 1: Pod CrashLoopBackOff Investigation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario"}),": Pod is repeatedly crashing, need to understand why"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Pod",\n  "resource_name": "nginx-7d8b5f9c6b-x7k2p",\n  "namespace": "default",\n  "start_time": 1702382400,\n  "end_time": 1702386000,\n  "investigation_type": "incident"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"})," (abbreviated):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "investigations": [\n    {\n      "resource_id": "Pod/default/nginx-7d8b5f9c6b-x7k2p",\n      "kind": "Pod",\n      "namespace": "default",\n      "name": "nginx-7d8b5f9c6b-x7k2p",\n      "current_status": "Error",\n      "current_message": "CrashLoopBackOff",\n      "timeline_start": 1702382400,\n      "timeline_end": 1702385800,\n      "status_segments": [\n        {\n          "start_time": 1702382400,\n          "end_time": 1702383200,\n          "duration_seconds": 800,\n          "status": "Running",\n          "message": "All containers running"\n        },\n        {\n          "start_time": 1702383200,\n          "end_time": 1702385800,\n          "duration_seconds": 2600,\n          "status": "Error",\n          "message": "CrashLoopBackOff"\n        }\n      ],\n      "events": [\n        {\n          "timestamp": 1702383200,\n          "reason": "BackOff",\n          "message": "Back-off restarting failed container nginx in pod nginx-7d8b5f9c6b-x7k2p",\n          "type": "Warning",\n          "count": 15,\n          "source": "kubelet"\n        },\n        {\n          "timestamp": 1702383250,\n          "reason": "Failed",\n          "message": "Error: ErrImagePull - image \'nginx:nonexistent\' not found",\n          "type": "Warning",\n          "count": 3,\n          "source": "kubelet"\n        }\n      ],\n      "investigation_prompts": [\n        "Analyze the status transitions for Pod/nginx-7d8b5f9c6b-x7k2p. What caused the transition from Running to Error?",\n        "The Pod nginx-7d8b5f9c6b-x7k2p is currently in Error state since 2600 seconds. What are the immediate mitigation steps?",\n        "Based on the events, what is the root cause of the current error in nginx-7d8b5f9c6b-x7k2p?",\n        "Interpret the current message: \'CrashLoopBackOff\'. What does it mean?"\n      ]\n    }\n  ],\n  "investigation_time_ms": 187\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Analysis"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Pod was Running for 800 seconds (13.3 minutes)"}),"\n",(0,t.jsx)(n.li,{children:"Transitioned to Error state at 10:13:20"}),"\n",(0,t.jsxs)(n.li,{children:["CrashLoopBackOff caused by image pull failure (",(0,t.jsx)(n.code,{children:"nginx:nonexistent"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Event repeated 15 times over 43 minutes"}),"\n",(0,t.jsx)(n.li,{children:"Investigation prompts guide LLM to identify image tag issue"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-2-deployment-post-mortem",children:"Example 2: Deployment Post-Mortem"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario"}),": Deployment update caused outage, need full timeline"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Deployment",\n  "resource_name": "api-server",\n  "namespace": "production",\n  "start_time": 1702378800,\n  "end_time": 1702386000,\n  "investigation_type": "post-mortem"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"})," (abbreviated):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "investigations": [\n    {\n      "resource_id": "Deployment/production/api-server",\n      "kind": "Deployment",\n      "namespace": "production",\n      "name": "api-server",\n      "current_status": "Ready",\n      "current_message": "Deployment has minimum availability",\n      "timeline_start": 1702378800,\n      "timeline_end": 1702385900,\n      "status_segments": [\n        {\n          "start_time": 1702378800,\n          "end_time": 1702384000,\n          "duration_seconds": 5200,\n          "status": "Ready",\n          "message": "Deployment has minimum availability"\n        },\n        {\n          "start_time": 1702384000,\n          "end_time": 1702384800,\n          "duration_seconds": 800,\n          "status": "Warning",\n          "message": "ReplicaFailure: pods failed to start"\n        },\n        {\n          "start_time": 1702384800,\n          "end_time": 1702385900,\n          "duration_seconds": 1100,\n          "status": "Ready",\n          "message": "Deployment has minimum availability"\n        }\n      ],\n      "events": [\n        {\n          "timestamp": 1702384000,\n          "reason": "ScalingReplicaSet",\n          "message": "Scaled up replica set api-server-85f6c9b8 to 3",\n          "type": "Normal",\n          "count": 1,\n          "source": "deployment-controller"\n        },\n        {\n          "timestamp": 1702384150,\n          "reason": "FailedCreate",\n          "message": "Error creating: pods \'api-server-85f6c9b8-\' is forbidden: exceeded quota",\n          "type": "Warning",\n          "count": 3,\n          "source": "replicaset-controller"\n        }\n      ],\n      "investigation_prompts": [\n        "Create a timeline of what happened to Deployment/api-server during this period.",\n        "What were the contributing factors that led to the status changes in api-server?",\n        "How long did api-server remain in each problematic state? Suggest improvements.",\n        "Document the 1 error events and identify any patterns that could be prevented."\n      ]\n    }\n  ],\n  "investigation_time_ms": 245\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Analysis"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Deployment was healthy for 86 minutes"}),"\n",(0,t.jsx)(n.li,{children:"Scaling triggered at 10:40:00"}),"\n",(0,t.jsx)(n.li,{children:"Entered Warning state for 13.3 minutes (resource quota exceeded)"}),"\n",(0,t.jsx)(n.li,{children:"Recovered after 18.3 minutes"}),"\n",(0,t.jsx)(n.li,{children:"Post-mortem prompts guide documentation of timeline and prevention"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-3-multi-pod-wildcard-investigation",children:"Example 3: Multi-Pod Wildcard Investigation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario"}),": Multiple pods failing, investigate all at once"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Request"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Pod",\n  "resource_name": "*",\n  "namespace": "production",\n  "start_time": 1702382400,\n  "end_time": 1702386000,\n  "investigation_type": "incident",\n  "max_investigations": 5\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Response"})," (abbreviated):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "investigations": [\n    {\n      "resource_id": "Pod/production/app-7d9f8c5b-z9k3p",\n      "kind": "Pod",\n      "namespace": "production",\n      "name": "app-7d9f8c5b-z9k3p",\n      "current_status": "Error",\n      "status_segments": [...]\n    },\n    {\n      "resource_id": "Pod/production/app-7d9f8c5b-a2b4c",\n      "kind": "Pod",\n      "namespace": "production",\n      "name": "app-7d9f8c5b-a2b4c",\n      "current_status": "Error",\n      "status_segments": [...]\n    },\n    {\n      "resource_id": "Pod/production/worker-6c8d4f-x7k2p",\n      "kind": "Pod",\n      "namespace": "production",\n      "name": "worker-6c8d4f-x7k2p",\n      "current_status": "Running",\n      "status_segments": [...]\n    }\n  ],\n  "investigation_time_ms": 512\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Analysis"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Returned top 5 pods from production namespace"}),"\n",(0,t.jsx)(n.li,{children:"2 pods in Error state, 1 Running"}),"\n",(0,t.jsx)(n.li,{children:"Each has full timeline and investigation prompts"}),"\n",(0,t.jsx)(n.li,{children:"Useful for identifying patterns across multiple failing pods"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance-characteristics",children:"Performance Characteristics"}),"\n",(0,t.jsx)(n.h3,{id:"execution-time",children:"Execution Time"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Scenario"}),(0,t.jsx)(n.th,{children:"Resource Count"}),(0,t.jsx)(n.th,{children:"Avg Time"}),(0,t.jsx)(n.th,{children:"P95 Time"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Single resource"}),(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"50-100 ms"}),(0,t.jsx)(n.td,{children:"150 ms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Wildcard (10 resources)"}),(0,t.jsx)(n.td,{children:"10"}),(0,t.jsx)(n.td,{children:"200-400 ms"}),(0,t.jsx)(n.td,{children:"600 ms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Wildcard (50 resources)"}),(0,t.jsx)(n.td,{children:"50"}),(0,t.jsx)(n.td,{children:"800-1200 ms"}),(0,t.jsx)(n.td,{children:"1,800 ms"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Wildcard (100 resources)"}),(0,t.jsx)(n.td,{children:"100"}),(0,t.jsx)(n.td,{children:"1,500-2,500 ms"}),(0,t.jsx)(n.td,{children:"3,500 ms"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Execution time depends on:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Number of resources investigated"}),"\n",(0,t.jsx)(n.li,{children:"Event count per resource"}),"\n",(0,t.jsx)(n.li,{children:"Status segment complexity"}),"\n",(0,t.jsx)(n.li,{children:"Time window size"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"optimization-tips",children:"Optimization Tips"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1. Investigate Specific Resources"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Slower: Wildcard all Pods\n{"resource_name": "*"}\n\n// Faster: Specific Pod\n{"resource_name": "nginx-7d8b5f9c6b-x7k2p"}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2. Limit Max Investigations"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Slower: 100 resources\n{"max_investigations": 100}\n\n// Faster: 10 resources\n{"max_investigations": 10}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3. Narrow Namespace"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Slower: All namespaces\n{"namespace": ""}\n\n// Faster: Specific namespace\n{"namespace": "production"}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"4. Shorter Time Windows"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Slower: 24-hour window\n{"start_time": 1702296000, "end_time": 1702382400}\n\n// Faster: 1-hour window\n{"start_time": 1702382400, "end_time": 1702386000}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"memory-usage",children:"Memory Usage"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Estimated Memory per Investigation:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Memory = (events \xd7 1 KB) + (segments \xd7 0.5 KB) + overhead\n\nTypical Pod: 10 events + 3 segments = ~13 KB\nBusy Pod: 100 events + 10 segments = ~105 KB\n100 resources: ~1-10 MB total\n"})}),"\n",(0,t.jsx)(n.h2,{id:"integration-patterns",children:"Integration Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"pattern-1-three-step-rca-workflow",children:"Pattern 1: Three-Step RCA Workflow"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step 1"}),": Find problematic resources with ",(0,t.jsx)(n.code,{children:"cluster_health"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{"start_time": 1702382400, "end_time": 1702386000}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step 2"}),": Identify high-impact changes with ",(0,t.jsx)(n.code,{children:"resource_changes"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{"impact_threshold": 0.5, "max_resources": 10}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step 3"}),": ",(0,t.jsx)(n.strong,{children:"Deep investigate"})," top resource"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Pod",\n  "resource_name": "api-server-85f6c9b8-k4x2p",\n  "investigation_type": "incident"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"pattern-2-post-mortem-prompt-integration",children:"Pattern 2: Post-Mortem Prompt Integration"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"post_mortem_incident_analysis"})," prompt uses ",(0,t.jsx)(n.code,{children:"investigate"})," internally:"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Natural Language"})," (Claude Desktop):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Analyze incident at 10:00 AM on December 12, 2024\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Behind the scenes"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Calls ",(0,t.jsx)(n.code,{children:"cluster_health"})," for overview"]}),"\n",(0,t.jsxs)(n.li,{children:["Calls ",(0,t.jsx)(n.code,{children:"resource_changes"})," to find impacted resources"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Calls ",(0,t.jsx)(n.code,{children:"investigate"})]})," for top 3-5 resources"]}),"\n",(0,t.jsx)(n.li,{children:"Uses investigation_prompts to generate RCA"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"pattern-3-live-incident-prompt-integration",children:"Pattern 3: Live Incident Prompt Integration"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"live_incident_handling"})," prompt uses ",(0,t.jsx)(n.code,{children:"investigate"})," for immediate guidance:"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Natural Language"})," (Claude Desktop):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Help me fix failing pods in production\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Behind the scenes"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Calls ",(0,t.jsx)(n.code,{children:"cluster_health"})," to identify Error pods"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Calls ",(0,t.jsx)(n.code,{children:"investigate"})]})," with ",(0,t.jsx)(n.code,{children:'investigation_type: "incident"'})]}),"\n",(0,t.jsx)(n.li,{children:"Uses prompts for immediate mitigation steps"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"pattern-4-timeline-export-for-documentation",children:"Pattern 4: Timeline Export for Documentation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Case"}),": Export investigation timeline to incident report"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "resource_kind": "Deployment",\n  "resource_name": "api-server",\n  "investigation_type": "post-mortem"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Extract"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"status_segments"})," \u2192 Timeline section"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"events"})," \u2192 Event log section"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"investigation_prompts"})," \u2192 LLM analysis prompts"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"empty-investigations-array",children:"Empty Investigations Array"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptom"}),": ",(0,t.jsx)(n.code,{children:"investigations: []"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1. No matching resources"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Request\n{"resource_kind": "Pod", "resource_name": "nonexistent"}\n\n// Response\n{"investigations": [], "investigation_time_ms": 25}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),": Verify resource name and namespace"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2. Resource name mismatch"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Wrong: Using label selector\n{"resource_name": "app=nginx"}\n\n// Correct: Exact name or wildcard\n{"resource_name": "nginx-7d8b5f9c6b-x7k2p"}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3. No events in time window"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Request has correct name but wrong time range\n{"start_time": 1234567890, "end_time": 1234571490}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),": Expand time range or check resource creation time"]}),"\n",(0,t.jsx)(n.h3,{id:"missing-status-segments",children:"Missing Status Segments"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptom"}),": ",(0,t.jsx)(n.code,{children:"status_segments: []"})," but ",(0,t.jsx)(n.code,{children:"events"})," has data"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Possible Causes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Resource has events but no status transitions"}),"\n",(0,t.jsx)(n.li,{children:"Resource kind doesn't have status field (ConfigMaps, Secrets)"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),": This is expected for some resource kinds; rely on ",(0,t.jsx)(n.code,{children:"events"})," array"]}),"\n",(0,t.jsx)(n.h3,{id:"investigation-prompts-not-helpful",children:"Investigation Prompts Not Helpful"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptom"}),": Generic prompts not relevant to specific issue"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Cause"}),": Auto-generated prompts are heuristic-based"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solution"}),": Use prompts as starting point, customize analysis based on:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"events"})," array for specific error messages"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"status_segments"})," for transition patterns"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"current_message"})," for latest state"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"high-investigation-time",children:"High Investigation Time"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptom"}),": ",(0,t.jsx)(n.code,{children:"investigation_time_ms > 3000"})," (3+ seconds)"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Causes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Wildcard with many resources (",(0,t.jsx)(n.code,{children:"max_investigations"})," too high)"]}),"\n",(0,t.jsx)(n.li,{children:"Very large time window (7+ days)"}),"\n",(0,t.jsx)(n.li,{children:"High event volume per resource (100+ events)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Reduce ",(0,t.jsx)(n.code,{children:"max_investigations"})," to 10-20"]}),"\n",(0,t.jsx)(n.li,{children:"Narrow time window to 1-6 hours"}),"\n",(0,t.jsx)(n.li,{children:"Investigate specific resource instead of wildcard"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"mcp-connection-errors",children:"MCP Connection Errors"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptom"}),": Tool call fails with connection error"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1. Verify MCP server is running"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -l app=spectre\nkubectl logs spectre-server-0 -c mcp\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2. Check MCP endpoint"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8081/mcp \\\n  -H "Content-Type: application/json" \\\n  -d \'{"jsonrpc":"2.0","method":"tools/list","params":{},"id":1}\'\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3. Verify Spectre API connectivity"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8080/api/v1/health\n"})}),"\n",(0,t.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,t.jsx)(n.h3,{id:"mcp-protocol-request",children:"MCP Protocol Request"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Single Resource"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "method": "tools/call",\n  "params": {\n    "name": "investigate",\n    "arguments": {\n      "resource_kind": "Pod",\n      "resource_name": "nginx-7d8b5f9c6b-x7k2p",\n      "namespace": "default",\n      "start_time": 1702382400,\n      "end_time": 1702386000,\n      "investigation_type": "incident"\n    }\n  },\n  "id": 1\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Wildcard"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "method": "tools/call",\n  "params": {\n    "name": "investigate",\n    "arguments": {\n      "resource_kind": "Pod",\n      "resource_name": "*",\n      "namespace": "production",\n      "start_time": 1702382400,\n      "end_time": 1702386000,\n      "max_investigations": 10\n    }\n  },\n  "id": 1\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"mcp-protocol-response",children:"MCP Protocol Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "result": {\n    "content": [\n      {\n        "type": "text",\n        "text": "{\\"investigations\\":[...],\\"investigation_time_ms\\":187}"\n      }\n    ]\n  },\n  "id": 1\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Response is JSON-encoded string in ",(0,t.jsx)(n.code,{children:"text"})," field."]}),"\n",(0,t.jsx)(n.h3,{id:"curl-example",children:"cURL Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8081/mcp \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jsonrpc": "2.0",\n    "method": "tools/call",\n    "params": {\n      "name": "investigate",\n      "arguments": {\n        "resource_kind": "Pod",\n        "resource_name": "nginx-7d8b5f9c6b-x7k2p",\n        "namespace": "default",\n        "start_time": 1702382400,\n        "end_time": 1702386000,\n        "investigation_type": "incident"\n      }\n    },\n    "id": 1\n  }\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"claude-desktop-usage",children:"Claude Desktop Usage"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Natural Language"})," (leverages prompts):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Investigate the nginx pod that's failing in default namespace\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Direct Tool Call"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Use the investigate tool with:\n- resource_kind: Pod\n- resource_name: nginx-7d8b5f9c6b-x7k2p\n- namespace: default\n- start_time: 1702382400\n- end_time: 1702386000\n- investigation_type: incident\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Claude Desktop automatically formats MCP requests; no manual JSON required."]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"-do",children:"\u2705 Do"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use after resource_changes"})," - Identify targets first, then investigate deeply"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Specify investigation_type"})," - Use ",(0,t.jsx)(n.code,{children:'"incident"'})," for live issues, ",(0,t.jsx)(n.code,{children:'"post-mortem"'})," for historical"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Leverage investigation_prompts"})," - Feed prompts to LLMs for RCA guidance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check status_segments"})," - Understand how long resources stayed in each state"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Correlate events with segments"})," - Match event timestamps to status transitions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use wildcards judiciously"})," - Set reasonable ",(0,t.jsx)(n.code,{children:"max_investigations"})," limit"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Review timeline_start/end"})," - Ensure investigation window covers incident"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Export for documentation"})," - Use output for incident reports"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-dont",children:"\u274c Don't"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't investigate without context"})," - Use cluster_health or resource_changes first"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't use wildcard without limits"})," - Always set ",(0,t.jsx)(n.code,{children:"max_investigations"})," < 50"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't ignore investigation_prompts"})," - They provide contextual RCA guidance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't investigate wrong resource kind"})," - Verify kind matches (Pod vs Deployment vs Service)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't use very wide time windows"})," - 1-6 hours is optimal for detailed analysis"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't expect complete state"})," - Snapshots only saved for Error/Warning transitions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't use for discovery"})," - Use resource_explorer to find resources first"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Don't ignore current_message"})," - Often contains critical error information"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/spectre/docs/mcp-integration/tools-reference/cluster-health",children:"cluster_health Tool"})," - Find unhealthy resources to investigate"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/spectre/docs/mcp-integration/tools-reference/resource-changes",children:"resource_changes Tool"})," - Identify impactful changes before deep dive"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/spectre/docs/mcp-integration/tools-reference/resource-explorer",children:"resource_explorer Tool"})," - Discover resources to investigate"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/spectre/docs/mcp-integration/prompts-reference/post-mortem",children:"Post-Mortem Prompt"})," - Uses investigate for historical RCA"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/spectre/docs/mcp-integration/prompts-reference/live-incident",children:"Live Incident Prompt"})," - Uses investigate for immediate guidance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/spectre/docs/configuration/mcp-configuration",children:"MCP Configuration"})," - MCP server deployment"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function d(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);