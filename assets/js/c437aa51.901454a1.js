"use strict";(globalThis.webpackChunkspectre_docs=globalThis.webpackChunkspectre_docs||[]).push([[5300],{951:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"mcp-integration/getting-started","title":"Getting Started with MCP","description":"End-to-end guide from MCP deployment to your first investigation","source":"@site/docs/mcp-integration/getting-started.md","sourceDirName":"mcp-integration","slug":"/mcp-integration/getting-started","permalink":"/spectre/docs/mcp-integration/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/moolen/spectre/tree/master/docs/docs/mcp-integration/getting-started.md","tags":[],"version":"current","lastUpdatedBy":"Moritz Johner","lastUpdatedAt":1765616329000,"frontMatter":{"title":"Getting Started with MCP","description":"End-to-end guide from MCP deployment to your first investigation","keywords":["mcp","setup","claude","deployment","quick-start","helm","verification"]},"sidebar":"docsSidebar","previous":{"title":"MCP Integration","permalink":"/spectre/docs/mcp-integration/"},"next":{"title":"cluster_health Tool","permalink":"/spectre/docs/mcp-integration/tools-reference/cluster-health"}}');var r=s(4848),i=s(8453);const l={title:"Getting Started with MCP",description:"End-to-end guide from MCP deployment to your first investigation",keywords:["mcp","setup","claude","deployment","quick-start","helm","verification"]},o="Getting Started with MCP Integration",c={},d=[{value:"What is MCP Integration?",id:"what-is-mcp-integration",level:2},{value:"Architecture Overview",id:"architecture-overview",level:3},{value:"Capabilities",id:"capabilities",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"For Operators (Deploying MCP)",id:"for-operators-deploying-mcp",level:3},{value:"For AI Users (After Deployment)",id:"for-ai-users-after-deployment",level:3},{value:"Deployment Path 1: Helm Sidecar (Recommended)",id:"deployment-path-1-helm-sidecar-recommended",level:2},{value:"Step 1: Update Helm Release",id:"step-1-update-helm-release",level:3},{value:"Step 2: Verify Deployment",id:"step-2-verify-deployment",level:3},{value:"Step 3: Create Port-Forward",id:"step-3-create-port-forward",level:3},{value:"Step 4: Verify MCP Connection",id:"step-4-verify-mcp-connection",level:3},{value:"Step 5: Test MCP Protocol",id:"step-5-test-mcp-protocol",level:3},{value:"Deployment Path 2: Standalone Server",id:"deployment-path-2-standalone-server",level:2},{value:"When to Choose Standalone",id:"when-to-choose-standalone",level:3},{value:"Step 1: Deploy Standalone Pod",id:"step-1-deploy-standalone-pod",level:3},{value:"Step 2: Configure API URL",id:"step-2-configure-api-url",level:3},{value:"Step 3: Verify Connectivity",id:"step-3-verify-connectivity",level:3},{value:"Step 4: Access MCP Server",id:"step-4-access-mcp-server",level:3},{value:"First Investigation (HTTP API)",id:"first-investigation-http-api",level:2},{value:"Example 1: Cluster Health Check",id:"example-1-cluster-health-check",level:3},{value:"Example 2: Investigate Failing Pod",id:"example-2-investigate-failing-pod",level:3},{value:"First Investigation (Claude Desktop)",id:"first-investigation-claude-desktop",level:2},{value:"Verification Checklist",id:"verification-checklist",level:2},{value:"Common Setup Issues",id:"common-setup-issues",level:2},{value:"Issue: MCP Container Not Starting",id:"issue-mcp-container-not-starting",level:3},{value:"Issue: Tools Return Empty Results",id:"issue-tools-return-empty-results",level:3},{value:"Issue: Port-Forward Keeps Disconnecting",id:"issue-port-forward-keeps-disconnecting",level:3},{value:"Issue: MCP Protocol Version Mismatch",id:"issue-mcp-protocol-version-mismatch",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"For Operators",id:"for-operators",level:3},{value:"For AI Users",id:"for-ai-users",level:3},{value:"For Developers",id:"for-developers",level:3},{value:"Quick Reference",id:"quick-reference",level:2},{value:"Endpoints",id:"endpoints",level:3},{value:"Helm Configuration Keys",id:"helm-configuration-keys",level:3},{value:"MCP Tools (4 available)",id:"mcp-tools-4-available",level:3},{value:"MCP Prompts (2 available)",id:"mcp-prompts-2-available",level:3},{value:"Troubleshooting Quick Commands",id:"troubleshooting-quick-commands",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"getting-started-with-mcp-integration",children:"Getting Started with MCP Integration"})}),"\n",(0,r.jsx)(n.p,{children:"Complete guide from deploying Spectre's MCP server to running your first Kubernetes investigation."}),"\n",(0,r.jsx)(n.h2,{id:"what-is-mcp-integration",children:"What is MCP Integration?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"MCP (Model Context Protocol)"})," enables AI assistants like Claude to interact with Spectre's Kubernetes event data through a standardized protocol. Instead of manually running queries, you can have natural conversations with AI to investigate incidents, analyze changes, and troubleshoot cluster issues."]}),"\n",(0,r.jsx)(n.h3,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  AI Assistant (Claude Desktop, LLM applications)           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502 MCP Protocol (JSON-RPC 2.0)\n                        \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  MCP Server (sidecar or standalone)                        \u2502\n\u2502  - Exposes 4 tools (cluster_health, resource_changes, etc) \u2502\n\u2502  - Provides 2 prompts (post-mortem, live incident)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502 HTTP API (localhost or network)\n                        \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Spectre API Server (port 8080)                            \u2502\n\u2502  - Event storage and querying                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h3,{id:"capabilities",children:"Capabilities"}),"\n",(0,r.jsx)(n.p,{children:"Once deployed, AI assistants can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udd0d Investigate Incidents"}),': Ask "What happened to pods in production namespace 30 minutes ago?"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udcca Analyze Changes"}),': "Show me high-impact resource changes in the last hour"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udea8 Live Triage"}),': "Pods are crashing right now in namespace X, help me troubleshoot"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udcdd Post-Mortems"}),': "Analyze the incident from 10:00 to 11:00 yesterday"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\uddc2\ufe0f Browse Resources"}),': "List all deployments in namespace Y with Error status"']}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.h3,{id:"for-operators-deploying-mcp",children:"For Operators (Deploying MCP)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Spectre already deployed via Helm (any namespace)"}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.code,{children:"kubectl"})," access to the cluster"]}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Helm 3.x installed"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 (Optional) Network policy allowing MCP server access"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"for-ai-users-after-deployment",children:"For AI Users (After Deployment)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 MCP server deployed and accessible"}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Option A (Local)"}),": Claude Desktop installed + stdio transport configured"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Option B (Remote)"}),": HTTP endpoint accessible (direct or via port-forward)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deployment-path-1-helm-sidecar-recommended",children:"Deployment Path 1: Helm Sidecar (Recommended)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"When to use"}),": Production environments, simplest setup, shared network namespace."]}),"\n",(0,r.jsx)(n.h3,{id:"step-1-update-helm-release",children:"Step 1: Update Helm Release"}),"\n",(0,r.jsx)(n.p,{children:"Enable MCP server in your existing Spectre Helm release:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Update your values.yaml or use --set flags\nhelm upgrade spectre spectre/spectre \\\n  --namespace spectre-system \\\n  --reuse-values \\\n  --set mcp.enabled=true \\\n  --set mcp.httpAddr=":8081"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"What this does"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Adds MCP server container as sidecar to Spectre pod"}),"\n",(0,r.jsx)(n.li,{children:"Exposes port 8081 for MCP protocol"}),"\n",(0,r.jsx)(n.li,{children:"Shares network namespace with Spectre API (localhost communication)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-verify-deployment",children:"Step 2: Verify Deployment"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check pod is running with 2 containers (spectre + mcp)\nkubectl get pods -n spectre-system -l app.kubernetes.io/name=spectre\n\n# Expected output:\n# NAME                       READY   STATUS    RESTARTS   AGE\n# spectre-5f7d8c9b4-x7k2p   2/2     Running   0          2m\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Troubleshooting"}),": If pod shows ",(0,r.jsx)(n.code,{children:"1/2"})," Ready:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check MCP container logs\nkubectl logs -n spectre-system <pod-name> -c mcp\n\n# Common issues:\n# - "connection refused" \u2192 Spectre API not ready yet (wait 30s)\n# - "bind: address already in use" \u2192 Port conflict (check mcp.httpAddr)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-create-port-forward",children:"Step 3: Create Port-Forward"}),"\n",(0,r.jsx)(n.p,{children:"Access MCP server from your local machine:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Forward MCP port to localhost\nkubectl port-forward -n spectre-system svc/spectre 8081:8081\n\n# Leave this running in a terminal\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-verify-mcp-connection",children:"Step 4: Verify MCP Connection"}),"\n",(0,r.jsx)(n.p,{children:"Test the MCP server is responding:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Health check (simple HTTP GET)\ncurl http://localhost:8081/health\n\n# Expected: {"status":"healthy"}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-5-test-mcp-protocol",children:"Step 5: Test MCP Protocol"}),"\n",(0,r.jsx)(n.p,{children:"Initialize a session and list tools:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Initialize MCP session\ncurl -X POST http://localhost:8081/mcp/v1 \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jsonrpc": "2.0",\n    "method": "initialize",\n    "params": {\n      "protocolVersion": "2024-11-05",\n      "capabilities": {},\n      "clientInfo": {"name": "curl-test", "version": "1.0"}\n    },\n    "id": 1\n  }\'\n\n# Expected response includes:\n# - "serverInfo": {"name": "Spectre MCP Server", "version": "..."}\n# - "capabilities": {"tools": {...}, "prompts": {...}}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"List available tools"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8081/mcp/v1 \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jsonrpc": "2.0",\n    "method": "tools/list",\n    "id": 2\n  }\'\n\n# Expected: 4 tools (cluster_health, resource_changes, investigate, resource_explorer)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"deployment-path-2-standalone-server",children:"Deployment Path 2: Standalone Server"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"When to use"}),": Running MCP server independently (different pod, different namespace, or outside cluster)."]}),"\n",(0,r.jsx)(n.h3,{id:"when-to-choose-standalone",children:"When to Choose Standalone"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"MCP server needs different scaling than Spectre API"}),"\n",(0,r.jsx)(n.li,{children:"Running on a separate node or machine"}),"\n",(0,r.jsx)(n.li,{children:"Development/testing environment"}),"\n",(0,r.jsx)(n.li,{children:"Multiple Spectre instances with shared MCP server"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-1-deploy-standalone-pod",children:"Step 1: Deploy Standalone Pod"}),"\n",(0,r.jsx)(n.p,{children:"Create a standalone deployment:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# mcp-standalone.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: spectre-mcp\n  namespace: spectre-system\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: spectre-mcp\n  template:\n    metadata:\n      labels:\n        app: spectre-mcp\n    spec:\n      containers:\n      - name: mcp\n        image: spectre:latest  # Use your Spectre image\n        command: ["/spectre"]\n        args:\n          - mcp\n          - --api-url=http://spectre.spectre-system.svc.cluster.local:8080\n          - --http-addr=:8081\n          - --log-level=info\n        ports:\n        - containerPort: 8081\n          name: mcp\n        resources:\n          requests:\n            memory: 64Mi\n            cpu: 50m\n          limits:\n            memory: 256Mi\n            cpu: 200m\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: spectre-mcp\n  namespace: spectre-system\nspec:\n  selector:\n    app: spectre-mcp\n  ports:\n  - port: 8081\n    targetPort: 8081\n    name: mcp\n'})}),"\n",(0,r.jsx)(n.p,{children:"Apply the manifest:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f mcp-standalone.yaml\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-configure-api-url",children:"Step 2: Configure API URL"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Critical"}),": MCP server must reach Spectre API. Options:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Same namespace"}),": ",(0,r.jsx)(n.code,{children:"http://spectre:8080"})," (service name)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Different namespace"}),": ",(0,r.jsx)(n.code,{children:"http://spectre.spectre-system.svc.cluster.local:8080"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"External"}),": ",(0,r.jsx)(n.code,{children:"http://spectre.example.com"})," (if ingress configured)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-verify-connectivity",children:"Step 3: Verify Connectivity"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check MCP pod logs\nkubectl logs -n spectre-system deployment/spectre-mcp\n\n# Expected: "MCP server listening on :8081"\n# No errors about API connection\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-access-mcp-server",children:"Step 4: Access MCP Server"}),"\n",(0,r.jsx)(n.p,{children:"Create port-forward or expose via service:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Port-forward (development)\nkubectl port-forward -n spectre-system svc/spectre-mcp 8081:8081\n\n# OR expose via LoadBalancer (production)\nkubectl patch svc spectre-mcp -n spectre-system -p \'{"spec":{"type":"LoadBalancer"}}\'\n'})}),"\n",(0,r.jsx)(n.h2,{id:"first-investigation-http-api",children:"First Investigation (HTTP API)"}),"\n",(0,r.jsx)(n.p,{children:"Now that MCP server is running, let's run a real investigation."}),"\n",(0,r.jsx)(n.h3,{id:"example-1-cluster-health-check",children:"Example 1: Cluster Health Check"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Question"}),': "What\'s the current state of my cluster?"']}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"MCP Tool"}),": ",(0,r.jsx)(n.code,{children:"cluster_health"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Get current Unix timestamp\nEND_TIME=$(date +%s)\nSTART_TIME=$((END_TIME - 3600))  # Last hour\n\n# Call cluster_health tool\ncurl -X POST http://localhost:8081/mcp/v1 \\\n  -H "Content-Type: application/json" \\\n  -d "{\n    \\"jsonrpc\\": \\"2.0\\",\n    \\"method\\": \\"tools/call\\",\n    \\"params\\": {\n      \\"name\\": \\"cluster_health\\",\n      \\"arguments\\": {\n        \\"start_time\\": $START_TIME,\n        \\"end_time\\": $END_TIME\n      }\n    },\n    \\"id\\": 3\n  }"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response"})," (abbreviated):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "result": {\n    "content": [\n      {\n        "type": "text",\n        "text": "{\\"overall_status\\":\\"Warning\\",\\"total_resources\\":42,\\"resources_by_kind\\":[{\\"kind\\":\\"Pod\\",\\"total\\":15,\\"healthy\\":12,\\"warning\\":2,\\"error\\":1}],\\"top_issues\\":[{\\"kind\\":\\"Pod\\",\\"namespace\\":\\"production\\",\\"name\\":\\"api-server-x7k2p\\",\\"status\\":\\"Error\\",\\"message\\":\\"CrashLoopBackOff\\"}],\\"error_resource_count\\":1,\\"warning_resource_count\\":2}"\n      }\n    ]\n  },\n  "id": 3\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Interpretation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Overall status: ",(0,r.jsx)(n.strong,{children:"Warning"})," (some issues present)"]}),"\n",(0,r.jsx)(n.li,{children:"42 total resources tracked"}),"\n",(0,r.jsxs)(n.li,{children:["1 Pod in ",(0,r.jsx)(n.strong,{children:"Error"})," state: ",(0,r.jsx)(n.code,{children:"api-server-x7k2p"})," (CrashLoopBackOff)"]}),"\n",(0,r.jsxs)(n.li,{children:["2 Pods in ",(0,r.jsx)(n.strong,{children:"Warning"})," state"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-2-investigate-failing-pod",children:"Example 2: Investigate Failing Pod"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Question"}),': "Why is api-server-x7k2p failing?"']}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"MCP Tool"}),": ",(0,r.jsx)(n.code,{children:"investigate"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://localhost:8081/mcp/v1 \\\n  -H "Content-Type: application/json" \\\n  -d "{\n    \\"jsonrpc\\": \\"2.0\\",\n    \\"method\\": \\"tools/call\\",\n    \\"params\\": {\n      \\"name\\": \\"investigate\\",\n      \\"arguments\\": {\n        \\"resource_kind\\": \\"Pod\\",\n        \\"resource_name\\": \\"api-server-x7k2p\\",\n        \\"namespace\\": \\"production\\",\n        \\"start_time\\": $START_TIME,\n        \\"end_time\\": $END_TIME,\n        \\"investigation_type\\": \\"incident\\"\n      }\n    },\n    \\"id\\": 4\n  }"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Response"})," includes:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeline"}),": Status transitions (Running \u2192 Error at 10:32:15)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Events"}),': Recent Kubernetes events ("Back-off restarting failed container", count: 15)']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Investigation Prompts"}),": AI-generated questions to guide RCA:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'"What caused the pod to transition from Running to Error?"'}),"\n",(0,r.jsx)(n.li,{children:'"Why is the container repeatedly failing to start?"'}),"\n",(0,r.jsx)(n.li,{children:'"Were there any configuration or deployment changes before the failure?"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next Steps"}),": Use the investigation prompts to guide further analysis (check logs, recent deployments, etc.)"]}),"\n",(0,r.jsx)(n.h2,{id:"first-investigation-claude-desktop",children:"First Investigation (Claude Desktop)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Preview"}),": With Claude Desktop integration, you can have natural conversations instead of crafting JSON-RPC requests."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Example conversation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"You: What's wrong with my production namespace right now?\n\nClaude: [Calls cluster_health tool automatically]\nI found 1 pod in Error state in the production namespace:\n- Pod: api-server-x7k2p\n- Issue: CrashLoopBackOff (container failing to start)\n\nWould you like me to investigate this pod in detail?\n\nYou: Yes, investigate it\n\nClaude: [Calls investigate tool]\nThe pod transitioned from Running to Error at 10:32:15.\nRecent events show the container is repeatedly failing to start (15 restart attempts).\n\nBased on the investigation, I recommend:\n1. Check container logs: kubectl logs api-server-x7k2p -n production --previous\n2. Review recent deployment changes (this may have started after an update)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Full Claude Desktop setup"}),": See ",(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/claude-integration",children:"Claude Integration Guide"})]}),"\n",(0,r.jsx)(n.h2,{id:"verification-checklist",children:"Verification Checklist"}),"\n",(0,r.jsx)(n.p,{children:"Use this checklist to confirm your MCP setup is working correctly:"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"1. Pod Running"}),": ",(0,r.jsx)(n.code,{children:"kubectl get pods"})," shows Spectre pod with ",(0,r.jsx)(n.code,{children:"2/2"})," Ready (sidecar) or standalone MCP pod with ",(0,r.jsx)(n.code,{children:"1/1"})," Ready"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"2. Health Check"}),": ",(0,r.jsx)(n.code,{children:"curl http://localhost:8081/health"})," returns ",(0,r.jsx)(n.code,{children:'{"status":"healthy"}'})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"3. MCP Initialize"}),": Initialize request returns ",(0,r.jsx)(n.code,{children:"serverInfo"})," and ",(0,r.jsx)(n.code,{children:"capabilities"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"4. Tools Available"}),": ",(0,r.jsx)(n.code,{children:"tools/list"})," returns 4 tools (cluster_health, resource_changes, investigate, resource_explorer)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"5. Prompts Available"}),": ",(0,r.jsx)(n.code,{children:"prompts/list"})," returns 2 prompts (post_mortem_incident_analysis, live_incident_handling)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"6. Tool Execution"}),": ",(0,r.jsx)(n.code,{children:"cluster_health"})," tool call succeeds and returns cluster data"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.strong,{children:"7. API Connectivity"}),": MCP server logs show no errors connecting to Spectre API"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"All checks passed?"})," \u2705 Your MCP integration is ready!"]}),"\n",(0,r.jsx)(n.h2,{id:"common-setup-issues",children:"Common Setup Issues"}),"\n",(0,r.jsx)(n.h3,{id:"issue-mcp-container-not-starting",children:"Issue: MCP Container Not Starting"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Pod shows ",(0,r.jsx)(n.code,{children:"1/2"})," Ready, MCP container in ",(0,r.jsx)(n.code,{children:"CrashLoopBackOff"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Diagnosis"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n spectre-system <pod-name> -c mcp\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Causes"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'"connection refused to :8080"'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Spectre API not ready yet"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),": Wait 30-60 seconds for Spectre to start, MCP will retry"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'"bind: address already in use"'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Port 8081 conflict"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),": Change ",(0,r.jsx)(n.code,{children:"mcp.httpAddr"})," to different port (e.g., ",(0,r.jsx)(n.code,{children:":8082"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'"invalid API URL"'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Incorrect ",(0,r.jsx)(n.code,{children:"mcp.apiUrl"})," (standalone mode)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),": Verify Spectre service name and namespace"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"issue-tools-return-empty-results",children:"Issue: Tools Return Empty Results"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": ",(0,r.jsx)(n.code,{children:"cluster_health"})," returns ",(0,r.jsx)(n.code,{children:'"total_resources": 0'})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Diagnosis"}),": Spectre may not have collected events yet"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fixes"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Check Spectre has data"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'kubectl logs -n spectre-system <pod-name> -c spectre | grep "events indexed"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Expected: Log entries showing events being indexed"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verify time window"}),": Ensure ",(0,r.jsx)(n.code,{children:"start_time"})," and ",(0,r.jsx)(n.code,{children:"end_time"})," cover a period with activity"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Check namespace filter"}),": If using ",(0,r.jsx)(n.code,{children:"namespace"})," parameter, verify the namespace exists and has resources"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"issue-port-forward-keeps-disconnecting",children:"Issue: Port-Forward Keeps Disconnecting"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": ",(0,r.jsx)(n.code,{children:"curl"}),' commands fail with "connection refused" intermittently']}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": ",(0,r.jsx)(n.code,{children:"kubectl port-forward"})," can be unstable"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),": Use a tool like ",(0,r.jsx)(n.code,{children:"kubefwd"})," or expose MCP via ingress:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Option 1: kubefwd (more stable)\nsudo kubefwd svc -n spectre-system -l app.kubernetes.io/name=spectre\n\n# Option 2: Ingress (production)\n# Add mcp.ingress.enabled=true to Helm values\n"})}),"\n",(0,r.jsx)(n.h3,{id:"issue-mcp-protocol-version-mismatch",children:"Issue: MCP Protocol Version Mismatch"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),': Initialize request fails with "unsupported protocol version"']}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),": Spectre MCP server uses protocol version ",(0,r.jsx)(n.strong,{children:"2024-11-05"}),". Update your client:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "method": "initialize",\n  "params": {\n    "protocolVersion": "2024-11-05",  // Use this exact version\n    ...\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.h3,{id:"for-operators",children:"For Operators"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Production Configuration"}),": Review ",(0,r.jsx)(n.a,{href:"/spectre/docs/configuration/mcp-configuration",children:"MCP Configuration Guide"})," for resource planning, security, and monitoring"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Enable Ingress"}),": Expose MCP server via ingress for remote access (see configuration guide)"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Set Up Monitoring"}),": Add Prometheus metrics and alerting (see Operations docs)"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Network Policies"}),": Restrict MCP access to authorized clients only"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"for-ai-users",children:"For AI Users"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Claude Desktop Setup"}),": Follow ",(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/claude-integration",children:"Claude Integration Guide"})," for conversational investigations"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Learn the Tools"}),": Read ",(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/tools-reference/cluster-health",children:"Tools Reference"})," to understand capabilities"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Try Prompts"}),": Use pre-built prompts for ",(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/prompts-reference/post-mortem",children:"Post-Mortems"})," and ",(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/prompts-reference/live-incident",children:"Live Incidents"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"See Examples"}),": Explore ",(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/examples",children:"Real-World Examples"})," for common scenarios"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"for-developers",children:"For Developers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"MCP Protocol"}),": Read MCP specification at ",(0,r.jsx)(n.a,{href:"https://modelcontextprotocol.io",children:"https://modelcontextprotocol.io"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Tool Schemas"}),": Review tool input/output schemas in ",(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/tools-reference/cluster-health",children:"Tools Reference"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Build Integrations"}),": Use MCP client libraries to integrate with your own applications"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Extend Functionality"}),": Contribute new tools or prompts (see Development docs)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,r.jsx)(n.h3,{id:"endpoints",children:"Endpoints"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Endpoint"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Transport"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://localhost:8081/health"})}),(0,r.jsx)(n.td,{children:"Health check (HTTP GET)"}),(0,r.jsx)(n.td,{children:"HTTP"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"http://localhost:8081/mcp/v1"})}),(0,r.jsx)(n.td,{children:"MCP protocol (JSON-RPC 2.0 POST)"}),(0,r.jsx)(n.td,{children:"HTTP"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"stdio"})}),(0,r.jsx)(n.td,{children:"MCP over stdin/stdout"}),(0,r.jsx)(n.td,{children:"stdio (Claude Desktop)"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"helm-configuration-keys",children:"Helm Configuration Keys"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Key"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mcp.enabled"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),(0,r.jsx)(n.td,{children:"Enable MCP server"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mcp.httpAddr"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'":8081"'})}),(0,r.jsx)(n.td,{children:"HTTP listen address"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mcp.apiUrl"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"http://localhost:8080"'})}),(0,r.jsx)(n.td,{children:"Spectre API URL (sidecar uses localhost)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mcp.logLevel"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"info"'})}),(0,r.jsx)(n.td,{children:"Log level (debug, info, warn, error)"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"mcp-tools-4-available",children:"MCP Tools (4 available)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Tool"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Use Case"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"cluster_health"})}),(0,r.jsx)(n.td,{children:"Cluster overview with status breakdown"}),(0,r.jsx)(n.td,{children:'"What\'s the current state?"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"resource_changes"})}),(0,r.jsx)(n.td,{children:"High-impact changes with correlation"}),(0,r.jsx)(n.td,{children:'"What changed recently?"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"investigate"})}),(0,r.jsx)(n.td,{children:"Detailed timeline for specific resource"}),(0,r.jsx)(n.td,{children:'"Why is this pod failing?"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"resource_explorer"})}),(0,r.jsx)(n.td,{children:"Browse and discover resources"}),(0,r.jsx)(n.td,{children:'"List all deployments in namespace X"'})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"mcp-prompts-2-available",children:"MCP Prompts (2 available)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Prompt"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Use Case"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"post_mortem_incident_analysis"})}),(0,r.jsx)(n.td,{children:"Historical incident investigation"}),(0,r.jsx)(n.td,{children:'"Analyze the outage from 10:00-11:00 yesterday"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"live_incident_handling"})}),(0,r.jsx)(n.td,{children:"Real-time triage and mitigation"}),(0,r.jsx)(n.td,{children:'"Pods are failing right now, help me troubleshoot"'})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-quick-commands",children:"Troubleshooting Quick Commands"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check MCP pod status\nkubectl get pods -n spectre-system -l app.kubernetes.io/name=spectre\n\n# View MCP logs\nkubectl logs -n spectre-system <pod-name> -c mcp -f\n\n# Test health endpoint\ncurl http://localhost:8081/health\n\n# Initialize MCP session\ncurl -X POST http://localhost:8081/mcp/v1 \\\n  -H "Content-Type: application/json" \\\n  -d \'{"jsonrpc":"2.0","method":"initialize","params":{"protocolVersion":"2024-11-05","capabilities":{},"clientInfo":{"name":"test","version":"1.0"}},"id":1}\'\n\n# List tools\ncurl -X POST http://localhost:8081/mcp/v1 \\\n  -H "Content-Type: application/json" \\\n  -d \'{"jsonrpc":"2.0","method":"tools/list","id":2}\'\n\n# Quick cluster health check\nEND=$(date +%s); START=$((END-3600)); \\\ncurl -X POST http://localhost:8081/mcp/v1 \\\n  -H "Content-Type: application/json" \\\n  -d "{\\"jsonrpc\\":\\"2.0\\",\\"method\\":\\"tools/call\\",\\"params\\":{\\"name\\":\\"cluster_health\\",\\"arguments\\":{\\"start_time\\":$START,\\"end_time\\":$END}},\\"id\\":3}"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/spectre/docs/configuration/mcp-configuration",children:"MCP Configuration Guide"})," - Complete configuration reference with Helm values"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/claude-integration",children:"Claude Integration Guide"})," - Set up Claude Desktop for conversational investigations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/tools-reference/cluster-health",children:"Tools Reference"})," - Detailed API documentation for all 4 MCP tools"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/prompts-reference/post-mortem",children:"Prompts Reference"})," - Workflow guides for pre-built prompts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/spectre/docs/mcp-integration/examples",children:"Real-World Examples"})," - Complete investigation scenarios with step-by-step walkthroughs"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var t=s(6540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);